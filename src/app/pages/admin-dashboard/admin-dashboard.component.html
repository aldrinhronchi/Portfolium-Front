<div class="container mt-4">
  <h2>Painel Administrativo</h2>

  <div class="alert alert-danger" *ngIf="error">
    {{ error }}
  </div>


  <!-- Projetos -->
  <div class="card mt-4">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="mb-0">Projetos</h5>
      <button class="btn btn-primary btn-sm" (click)="openCreateModal()">Novo Projeto</button>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th>Título</th>
              <th>Descrição</th>
              <th>Tecnologias</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let project of projects">
              <td>{{ project.Name }}</td>
              <td>{{ project.Description }}</td>
              <td>{{ project.Technologies }}</td>
              <td>
                <button class="btn btn-sm btn-outline-primary me-2" (click)="openEditModal(project)">
                  Editar
                </button>
                <button class="btn btn-sm btn-outline-danger" (click)="confirmDelete(project)">
                  Excluir
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Currículo -->
  <div class="card mt-4">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="mb-0">Currículo</h5>
      <button class="btn btn-primary btn-sm" (click)="openCurriculumModal('personal')" [disabled]="!personalInfo">
        Editar Currículo
      </button>
    </div>
    <div class="card-body">
      <div *ngIf="personalInfo">
        <div class="mb-3">
          <strong>Nome:</strong> {{ personalInfo.Name }}
        </div>
        <div class="mb-3">
          <strong>Email:</strong> {{ personalInfo.Email }}
        </div>
        <div class="mb-3">
          <strong>Telefone:</strong> {{ personalInfo.Phone }}
        </div>
        <div class="mb-3">
          <strong>Resumo:</strong>
          <p>{{ personalInfo.Description }}</p>
        </div>
      </div>
        <div *ngIf="!personalInfo" class="text-center">
        <p>Nenhum currículo encontrado.</p>
        <button class="btn btn-primary" (click)="openCurriculumModal('personal')">Adicionar Currículo</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Projeto -->
<app-project-form-modal 
[project]="selectedProject"
[isEditMode]="isEditMode"
[isViewMode]="isViewMode"
[isVisible]="showProjectModal"
(save)="saveProject($event)"
(cancel)="closeProjectModal()">
</app-project-form-modal>

<app-curriculum-form-modal 
[type]="curriculumModalType"
[item]="selectedCurriculumItem"
[isEditMode]="isEditCurriculumMode"
[isVisible]="showCurriculumModal"
(save)="saveCurriculumItem($event)"
(cancel)="closeCurriculumModal()">
</app-curriculum-form-modal> 