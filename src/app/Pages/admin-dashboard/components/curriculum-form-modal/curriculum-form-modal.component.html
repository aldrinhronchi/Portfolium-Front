<div class="modal fade show" [style.display]="'block'" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">{{ getModalTitle() }}</h5>
        <button type="button" class="btn-close" (click)="onCancel()"></button>
      </div>
      <form [formGroup]="curriculumForm" (ngSubmit)="onSubmit()">
        <div class="modal-body">
          <!-- Campos din√¢micos baseados no tipo -->
          <div [ngSwitch]="type">
            
            <!-- Informa√ß√µes Pessoais -->
            <div *ngSwitchCase="'personal'">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Nome *</label>
                  <input type="text" class="form-control" formControlName="Name" [class.is-invalid]="hasError('Name')">
                  <div *ngIf="hasError('Name')" class="invalid-feedback">{{ getErrorMessage('Name') }}</div>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">T√≠tulo Profissional *</label>
                  <input type="text" class="form-control" formControlName="Title" [class.is-invalid]="hasError('Title')">
                  <div *ngIf="hasError('Title')" class="invalid-feedback">{{ getErrorMessage('Title') }}</div>
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label">Descri√ß√£o</label>
                  <textarea class="form-control" rows="3" formControlName="Description"></textarea>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Localiza√ß√£o</label>
                  <input type="text" class="form-control" formControlName="Location">
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Telefone</label>
                  <input type="tel" class="form-control" formControlName="Phone">
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Email</label>
                  <input type="email" class="form-control" formControlName="Email">
                </div>
                
                <!-- Campos Estat√≠sticos -->
                <div class="col-12 mb-3">
                  <h6 class="text-muted">üìä Estat√≠sticas do Portf√≥lio</h6>
                </div>
                <div class="col-md-3 mb-3">
                  <label class="form-label">Anos de Experi√™ncia</label>
                  <input type="number" class="form-control" formControlName="YearsExperience" min="0">
                </div>
                <div class="col-md-3 mb-3">
                  <label class="form-label">Projetos Conclu√≠dos</label>
                  <input type="number" class="form-control" formControlName="ProjectsCompleted" min="0">
                </div>
                <div class="col-md-3 mb-3">
                  <label class="form-label">Clientes Felizes</label>
                  <input type="number" class="form-control" formControlName="HappyClients" min="0">
                </div>
                <div class="col-md-3 mb-3">
                  <label class="form-label">Certifica√ß√µes</label>
                  <input type="number" class="form-control" formControlName="Certifications" min="0">
                </div>
                
                <!-- Redes Sociais -->
                <div class="col-12 mb-3">
                  <h6 class="text-muted">üîó Redes Sociais</h6>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">LinkedIn URL</label>
                  <input type="url" class="form-control" formControlName="LinkedInUrl">
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">GitHub URL</label>
                  <input type="url" class="form-control" formControlName="GitHubUrl">
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Portfolio URL</label>
                  <input type="url" class="form-control" formControlName="PortfolioUrl">
                </div>
              </div>
            </div>

            <!-- Habilidade -->
            <div *ngSwitchCase="'skill'">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Nome da Habilidade *</label>
                  <input type="text" class="form-control" formControlName="Name" [class.is-invalid]="hasError('Name')">
                  <div *ngIf="hasError('Name')" class="invalid-feedback">{{ getErrorMessage('Name') }}</div>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Categoria *</label>
                  <select class="form-select" formControlName="Category" [class.is-invalid]="hasError('Category')">
                    <option value="">Selecione uma categoria</option>
                    <option *ngFor="let cat of skillCategories" [value]="cat">{{ cat }}</option>
                  </select>
                  <div *ngIf="hasError('Category')" class="invalid-feedback">{{ getErrorMessage('Category') }}</div>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">N√≠vel (0-100) *</label>
                  <input type="number" class="form-control" formControlName="Level" min="0" max="100" [class.is-invalid]="hasError('Level')">
                  <div *ngIf="hasError('Level')" class="invalid-feedback">{{ getErrorMessage('Level') }}</div>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">√çcone</label>
                  <input type="text" class="form-control" formControlName="Icon" placeholder="fab fa-angular">
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Cor</label>
                  <input type="color" class="form-control" formControlName="Color">
                </div>
              </div>
            </div>

            <!-- Experi√™ncia -->
            <div *ngSwitchCase="'experience'">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">T√≠tulo do Cargo *</label>
                  <input type="text" class="form-control" formControlName="Title" [class.is-invalid]="hasError('Title')">
                  <div *ngIf="hasError('Title')" class="invalid-feedback">{{ getErrorMessage('Title') }}</div>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Empresa *</label>
                  <input type="text" class="form-control" formControlName="Company" [class.is-invalid]="hasError('Company')">
                  <div *ngIf="hasError('Company')" class="invalid-feedback">{{ getErrorMessage('Company') }}</div>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Data de In√≠cio *</label>
                  <input type="date" class="form-control" formControlName="StartDate" [class.is-invalid]="hasError('StartDate')">
                  <div *ngIf="hasError('StartDate')" class="invalid-feedback">{{ getErrorMessage('StartDate') }}</div>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Data de Fim</label>
                  <input type="date" class="form-control" formControlName="EndDate">
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Localiza√ß√£o</label>
                  <input type="text" class="form-control" formControlName="Location">
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label">Descri√ß√£o</label>
                  <textarea class="form-control" rows="3" formControlName="Description"></textarea>
                </div>
                
                <!-- Campos Detalhados -->
                <div class="col-12 mb-3">
                  <label class="form-label">Responsabilidades</label>
                  <textarea class="form-control" rows="3" formControlName="Responsibilities" 
                            placeholder="Separe as responsabilidades por v√≠rgula ou lista em JSON"></textarea>
                  <small class="form-text text-muted">Ex: Desenvolvimento de aplica√ß√µes web, Gest√£o de equipe, Code review</small>
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label">Tecnologias Utilizadas</label>
                  <textarea class="form-control" rows="2" formControlName="Technologies" 
                            placeholder="Separe as tecnologias por v√≠rgula ou lista em JSON"></textarea>
                  <small class="form-text text-muted">Ex: Angular, TypeScript, C#, .NET Core, SQL Server</small>
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label">Conquistas</label>
                  <textarea class="form-control" rows="3" formControlName="Achievements" 
                            placeholder="Separe as conquistas por v√≠rgula ou lista em JSON"></textarea>
                  <small class="form-text text-muted">Ex: Aumento de 30% na performance, Implementa√ß√£o de CI/CD, Redu√ß√£o de bugs em 50%</small>
                </div>
                
                <div class="col-12 mb-3">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" formControlName="IsCurrentJob">
                    <label class="form-check-label">Trabalho atual</label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Educa√ß√£o -->
            <div *ngSwitchCase="'education'">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Grau/Curso *</label>
                  <input type="text" class="form-control" formControlName="Degree" [class.is-invalid]="hasError('Degree')">
                  <div *ngIf="hasError('Degree')" class="invalid-feedback">{{ getErrorMessage('Degree') }}</div>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Institui√ß√£o *</label>
                  <input type="text" class="form-control" formControlName="Institution" [class.is-invalid]="hasError('Institution')">
                  <div *ngIf="hasError('Institution')" class="invalid-feedback">{{ getErrorMessage('Institution') }}</div>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Data de In√≠cio *</label>
                  <input type="date" class="form-control" formControlName="StartDate" [class.is-invalid]="hasError('StartDate')">
                  <div *ngIf="hasError('StartDate')" class="invalid-feedback">{{ getErrorMessage('StartDate') }}</div>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Data de Conclus√£o</label>
                  <input type="date" class="form-control" formControlName="EndDate">
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Localiza√ß√£o</label>
                  <input type="text" class="form-control" formControlName="Location">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Nota/CRA</label>
                  <input type="text" class="form-control" formControlName="Grade">
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label">Descri√ß√£o</label>
                  <textarea class="form-control" rows="3" formControlName="Description"></textarea>
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label">Conquistas Acad√™micas</label>
                  <textarea class="form-control" rows="3" formControlName="Achievements" 
                            placeholder="Separe as conquistas por v√≠rgula ou lista em JSON"></textarea>
                  <small class="form-text text-muted">Ex: Formatura Magna Cum Laude, Bolsa de estudos, Projeto de pesquisa premiado</small>
                </div>
              </div>
            </div>

            <!-- Certifica√ß√£o -->
            <div *ngSwitchCase="'certification'">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Nome da Certifica√ß√£o *</label>
                  <input type="text" class="form-control" formControlName="Name" [class.is-invalid]="hasError('Name')">
                  <div *ngIf="hasError('Name')" class="invalid-feedback">{{ getErrorMessage('Name') }}</div>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Emissor *</label>
                  <input type="text" class="form-control" formControlName="Issuer" [class.is-invalid]="hasError('Issuer')">
                  <div *ngIf="hasError('Issuer')" class="invalid-feedback">{{ getErrorMessage('Issuer') }}</div>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Data de Emiss√£o *</label>
                  <input type="date" class="form-control" formControlName="IssueDate" [class.is-invalid]="hasError('IssueDate')">
                  <div *ngIf="hasError('IssueDate')" class="invalid-feedback">{{ getErrorMessage('IssueDate') }}</div>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Data de Expira√ß√£o</label>
                  <input type="date" class="form-control" formControlName="ExpiryDate">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">ID da Credencial</label>
                  <input type="text" class="form-control" formControlName="CredentialId">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">URL da Credencial</label>
                  <input type="url" class="form-control" formControlName="CredentialUrl">
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label">Descri√ß√£o</label>
                  <textarea class="form-control" rows="3" formControlName="Description"></textarea>
                </div>
              </div>
            </div>

            <!-- Servi√ßo -->
            <div *ngSwitchCase="'service'">
              <div class="row">
                <div class="col-md-8 mb-3">
                  <label class="form-label">T√≠tulo do Servi√ßo *</label>
                  <input type="text" class="form-control" formControlName="Title" [class.is-invalid]="hasError('Title')">
                  <div *ngIf="hasError('Title')" class="invalid-feedback">{{ getErrorMessage('Title') }}</div>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">√çcone</label>
                  <input type="text" class="form-control" formControlName="Icon" placeholder="fas fa-code">
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label">Descri√ß√£o</label>
                  <textarea class="form-control" rows="3" formControlName="Description"></textarea>
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label">Funcionalidades/Recursos</label>
                  <textarea class="form-control" rows="3" formControlName="Features" 
                            placeholder="Separe as funcionalidades por v√≠rgula ou lista em JSON"></textarea>
                  <small class="form-text text-muted">Ex: Design responsivo, Integra√ß√£o com APIs, SEO otimizado, Dashboard administrativo</small>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Pre√ßo</label>
                  <input type="number" class="form-control" formControlName="Price" min="0" step="0.01" [class.is-invalid]="hasError('Price')">
                  <div *ngIf="hasError('Price')" class="invalid-feedback">{{ getErrorMessage('Price') }}</div>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Moeda</label>
                  <select class="form-select" formControlName="Currency">
                    <option value="BRL">Real (BRL)</option>
                    <option value="USD">D√≥lar (USD)</option>
                    <option value="EUR">Euro (EUR)</option>
                  </select>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Dura√ß√£o</label>
                  <input type="text" class="form-control" formControlName="Duration" placeholder="ex: 2-3 semanas">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="onCancel()">
            Cancelar
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="loading || curriculumForm.invalid">
            <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
            {{ isEditMode ? 'Atualizar' : 'Salvar' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
<div class="modal-backdrop fade show"></div> 